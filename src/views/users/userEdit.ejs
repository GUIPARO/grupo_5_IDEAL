<!DOCTYPE html>
<html lang="en">
    <%- include("../partials/head") %>
<body>
    <%- include("../partials/header") %>
    
        
        <% if(locals.errors == undefined && userEdit !== undefined){ %> 
            <main class="register-main">
            <form class = "register-form" action="/users/userEdit/<%=userEdit[0].user_id%>?_method=PUT" method="POST" enctype="multipart/form-data">
                <h2 class="title-register">Editar datos</h2>
                
                <input class= "form" type="text" name="name" placeholder="Ingresa tus nombres" value="<%= userEdit[0].name%>">
                <% if(locals.errors && errors.name) { %>
                    <div> <%= errors.name.msg %> </div>
                    <% } %> 
                            
                <input class= "form" type="text" name="lastName"  placeholder="Ingresa tus apellidos"  value="<%= userEdit[0].lastname%>" >
                <% if(locals.errors && errors.lastName) { %>
                    <div> <%= errors.lastName.msg %> </div>
                    <% } %> 
                <input class= "form" type="email" name="email" placeholder="Ingresa tu correo"  value="<%= userEdit[0].email%>">
                <% if(locals.errors && errors.email) { %>
                    <div> <%= errors.email.msg %> </div>
                    <% } %> 

                <input class= "form" type="password" name="password"  placeholder="Ingresa tu nueva contrase単a" >
                <% if(locals.errors && errors.password) { %>
                    <div> <%= errors.password.msg %> </div>
                    <% } %> 
                <input class= "form" type="password" name="confirm_password" placeholder="Confirma tu contrase単a">
                <% if(locals.errors && errors.confirm_password) { %>
                    <div> <%= errors.confirm_password.msg %> </div>
                    <% } %> 

                <label for ="avatar"  name="avatar">Modificar imagen de perfil</label>
                <figure class="container_editAvatar">
                    <img class="ditAvatar" src="/img/users_avatars/<%=userEdit[0].avatar%>" alt="foto_usuario">
                </figure>    
                <input class= "form" type="file" name="avatar"  placeholder="Debes eligir tu avatar...">
                <% if (locals.errors && errors.avatar) { %>
                    <div> <%= errors.avatar.msg %></div>
                <% } %>
                
                <% if (locals.userLogged.role.role == 5){ %>
                <label for ="role"  name = "role"> Editar rol del usuario</label>
                <input class= "form" type="number" name="role" value="<%=userEdit[0].role.role%>" >
                <% } %> 

                <button class = "buttons" type="submit" class="submit"><span>Enviar</span></button>
            </form>
            <% } %> 

            <% if(locals.errors !== undefined && userEdit !== undefined){ %> 
                <main class="register-main">
                <form class = "register-form" action="/users/userEdit/<%=id%>?_method=PUT" method="POST" enctype="multipart/form-data">
                    <h2 class="title-register">Editar datos</h2>
                    
                    <input class= "form" type="text" name="name" placeholder="Ingresa tus nombres" value="<%= locals.userEdit ? userEdit.name : null%>">
                    <% if(locals.errors && errors.name) { %>
                        <div class="danger_text"> <%= errors.name.msg %> </div>
                        <% } %> 
                
                    <input class= "form" type="text" name="lastName"  placeholder="Ingresa tus apellidos"  value="<%= locals.userEdit ? userEdit.lastName : null%>" >
                    <% if(locals.errors && errors.lastName) { %>
                        <div class="danger_text"> <%= errors.lastName.msg %> </div>
                        <% } %> 
                    <input class= "form" type="email" name="email" placeholder="Ingresa tu correo"   value="<%= locals.userEdit ? userEdit.email : null%>">
                    <% if(locals.errors && errors.email) { %>
                        <div class="danger_text"> <%= errors.email.msg %> </div>
                        <% } %> 
    
                    <input class= "form" type="password" name="password"  placeholder="Ingresa tu nueva contrase単a" >
                    <% if(locals.errors && errors.password) { %>
                        <div class="danger_text"> <%= errors.password.msg %> </div>
                        <% } %> 
                    <input class= "form" type="password" name="confirm_password" placeholder="Confirma tu contrase単a">
                    <% if(locals.errors && errors.confirm_password) { %>
                        <div class="danger_text"> <%= errors.confirm_password.msg %> </div>
                        <% } %> 
    
                    <label for ="avatar"  name="avatar">Modificar imagen de perfil</label>
                    <figure class="container_editAvatar">
                        <img class="ditAvatar" src="/img/users_avatars/<%=userEdit.avatar%>" alt="foto_usuario">
                    </figure>    
                    <input class= "form" type="file" name="avatar"  value="<%= locals.userEdit ? userEdit.image : null %>">
                    <% if (locals.errors && errors.avatar) { %>
                        <div class="danger_text"> <%= errors.avatar.msg %></div>
                    <% } %>
                    

                    <% if (locals.userLogged.role.role == 5){ %>
                    <label for ="role"  name = "role"> Editar rol del usuario</label>
                    <input class= "form" type="number" name="role" value="<%=userEdit.role%>" >
                    <% } %> 
    
                    <button class = "buttons" type="submit" class="submit"><span>Enviar</span></button>
                </form>
                <% } %> 
            </main>
                <script src="/js/eventNavBar.js"></script>
    <%- include("../partials/footer") %>
</body>
</html>